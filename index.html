<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Diccionario SKU</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>

<div id="app" class="container">

  <h1>Buscar SKU</h1>
  <p class="subtitle">Ingresa el código del producto</p>

  <input
    type="text"
    v-model="skuBuscado"
    placeholder="Ej: ET8715947"
    @input="buscarSku"
    autofocus
  >

  <ul v-if="sugerencias.length" class="suggestions">
  <li
    v-for="s in sugerencias"
    :key="s.sku"
    @click="skuBuscado = s.sku; buscarSku()"
  >
    {{ s.sku }} – {{ s.nombre }}
  </li>
</ul>


  <transition name="fade">
    <div v-if="producto" class="card">
        <img :src="producto.imagen" alt="Producto">
        <h2>{{ producto.nombre }}</h2>
        <span class="sku">{{ producto.sku }}</span>
    </div>
</transition>

  <p v-if="error" class="error">{{ error }}</p>

</div>

<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
<script>
const { createApp } = Vue

createApp({
  data() {
    return {
        skuBuscado: '',
        productos: [],
        producto: null,
        sugerencias: [],
        error: ''
    }
  },
  mounted() {
    fetch('productos.json')
      .then(res => res.json())
      .then(data => {
        this.productos = data
      })
  },
  methods: {
    buscarSku() {
      const texto = this.skuBuscado.trim().toUpperCase()

      if (!texto) {
        this.producto = null
        this.sugerencias = []
        this.error = ''
        return
      }

      this.sugerencias = this.productos.filter(p =>
        p.sku.includes(texto)
      ).slice(0, 5)

      this.producto = this.productos.find(p => p.sku === texto)

      this.error = (!this.producto && this.sugerencias.length === 0)
        ? 'No encontramos ese SKU'
        : ''
    }
  }
}).mount('#app')
</script>

</body>
</html>